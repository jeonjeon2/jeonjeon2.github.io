
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>계산기 - MyCode12</title>
</head>
<body>
  <div id="header"></div>

  <main class="tools-container">
    <section class="tool-box">
      <h2>계산기</h2>
      
      <div class="tool-section">
        <p>
          <button class="form-toggle-btn" data-target="a-form">퍼센트</button>&nbsp;&nbsp;&nbsp;
          <button class="form-toggle-btn" data-target="d-form">변동률</button>&nbsp;&nbsp;&nbsp;
          <button class="form-toggle-btn" data-target="c-form">단리</button>&nbsp;&nbsp;&nbsp;
          <button class="form-toggle-btn" data-target="f-form">복리</button>&nbsp;&nbsp;&nbsp;
          <button class="form-toggle-btn" data-target="e-form">BMR(기초대사량)</button>&nbsp;&nbsp;&nbsp;
          <button class="form-toggle-btn" data-target="b-form">BMI(체질량지수)</button>&nbsp;&nbsp;&nbsp;
        </p>
         
        <div id="a-form" class="calc-form">
          <p>a, b에 대한 %를 계산합니다.</p>
          <form oninput="calculateChange()">
            <table border="0" cellspacing="10">
              <tr>
                <td align="right"><label for="a-value">변동 전(a):</label></td>
                <td><input type="number" id="a-value" name="a-value" step="any"></td>
              </tr>
              <tr>
                <td align="right"><label for="b-value">변동 후(b):</label></td>
                <td><input type="number" id="b-value" name="b-value" step="any"></td>
              </tr>
            </table>
            <p>변동률:&nbsp;&nbsp;&nbsp;<strong id="result">-</strong></p>
          </form>
        </div>

        <div id="d-form" class="calc-form">
          <p>a의 %에 대한 결과를 계산합니다.</p>
          <form oninput="calculatePercentageChange()">
            <table border="0" cellspacing="10">
              <tr>
                <td align="right"><label for="a-value2">기본 값(a):</label></td>
                <td><input type="number" id="a-value2" name="a-value2" step="any"></td>
              </tr>
              <tr>
                <td align="right"><label for="percent-value">변동률(%):</label></td>
                <td><input type="number" id="percent-value" name="percent-value" step="any"></td>
              </tr>
            </table>
            <p>결과 값:&nbsp;&nbsp;&nbsp;<strong id="result2">-</strong></p>
          </form>
        </div>


        <div id="e-form" class="calc-form">
          <p>기초대사량(BMR)을 계산합니다.</p>
          <form oninput="calculateBMR()">
            <table border="0" cellspacing="10">
              <tr>
                <td align="right"><label>성별:</label></td>
                <td>
                  <input type="radio" id="bmr-male" name="bmr-gender" value="male" checked>
                  <label for="bmr-male">남성</label>&nbsp;&nbsp;&nbsp;
                  <input type="radio" id="bmr-female" name="bmr-gender" value="female">
                  <label for="bmr-female">여성</label>
                </td>
              </tr>
              <tr>
                <td align="right"><label for="bmr-age">나이:</label></td>
                <td><input type="number" id="bmr-age" step="1"></td>
              </tr>
              <tr>
                <td align="right"><label for="bmr-height">키(cm):</label></td>
                <td><input type="number" id="bmr-height" step="any"></td>
              </tr>
              <tr>
                <td align="right"><label for="bmr-weight">몸무게(kg):</label></td>
                <td><input type="number" id="bmr-weight" step="any"></td>
              </tr>
            </table>
            <p>BMR:&nbsp;&nbsp;&nbsp;<strong id="bmr-result">-</strong> kcal/day</p>
          </form>
        </div>


        
        <div id="b-form" class="calc-form">
          <p>체질량지수(BMI)을 계산합니다.</p>
          <form oninput="calculateBMI()">
            <table border="0" cellspacing="10">
              <tr>
                <td align="right"><label for="height">키(cm):</label></td>
                <td><input type="number" id="height" name="height" step="any"></td>
              </tr>
              <tr>
                <td align="right"><label for="weight">몸무게(kg):</label></td>
                <td><input type="number" id="weight" name="weight" step="any"></td>
              </tr>
            </table>
            <p>BMI:&nbsp;&nbsp;&nbsp;<strong id="bmi-result">-</strong></p>
          </form>
        </div>

        <div id="c-form" class="calc-form">
          <form oninput="calculateSimpleInterest()">
            <p>단리 이자를 계산합니다.</p>
            <table border="0" cellspacing="10">
              <tr>
                <td align="right"><label for="principal">원금:</label></td>
                <td><input type="number" id="principal" name="principal" step="any"></td>
              </tr>
              <tr>
                <td align="right"><label for="rate">이자율(%):</label></td>
                <td><input type="number" id="rate" name="rate" step="any"></td>
              </tr>
              <tr>
                <td align="right"><label for="time">기간(년):</label></td>
                <td><input type="number" id="time" name="time" step="any"></td>
              </tr>
            </table>
            <p>이자액:&nbsp;&nbsp;&nbsp;<strong id="interest-result">-</strong></p>
            <p>총액:&nbsp;&nbsp;&nbsp;<strong id="total-result">-</strong></p>
          </form>
          <div id="simple-table-wrapper"></div>
        </div>

        <div id="f-form" class="calc-form">
          <form oninput="calculateCompoundInterest()">
            <p>복리 이자를 계산합니다.</p>
            <table border="0" cellspacing="10">
              <tr>
                <td align="right"><label for="c-principal">원금:</label></td>
                <td><input type="number" id="c-principal" step="any"></td>
              </tr>
              <tr>
                <td align="right"><label for="c-rate">이자율(%):</label></td>
                <td><input type="number" id="c-rate" step="any"></td>
              </tr>
              <tr>
                <td align="right">기간 단위:</td>
                <td>
                  <label><input type="radio" name="c-period-type" value="day" checked> 일</label>
                  <label><input type="radio" name="c-period-type" value="month"> 개월</label>
                </td>
              </tr>
              <tr>
                <td align="right"><label for="c-time">기간:</label></td>
                <td><input type="number" id="c-time" step="any"></td>
              </tr>
            </table>
        
            <p>총 이자:&nbsp;&nbsp;&nbsp;<strong id="c-interest-result">-</strong></p>
            <p>총액:&nbsp;&nbsp;&nbsp;<strong id="c-total-result">-</strong></p>
          </form>
        
          <div id="c-table-wrapper" style="margin-top: 20px;"></div>
        </div>

       

      </div>
    </section>
  </main>


  <div id="footer"></div>

  <script>
    // Load header
    fetch("header.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("header").innerHTML = data;
      });

    // Load footer
    fetch("footer.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("footer").innerHTML = data;
      });

    document.querySelectorAll('.form-toggle-btn').forEach(button => {
      button.addEventListener('click', function () {
        const targetId = this.getAttribute('data-target');
    
        // 모든 폼 숨김
        document.querySelectorAll('.calc-form').forEach(form => {
          form.style.display = 'none';
        });
    
        // 선택된 폼만 보이기
        const targetForm = document.getElementById(targetId);
        if (targetForm) targetForm.style.display = 'block';
      });
    });

    // 소수점 아래 2자리까지 고정하고, 소수점 부분만 파란색 span으로 인라인 스타일 적용
    function formatWithColoredDecimal(value) {
      const parts = value.toFixed(2).split(".");
      const intPart = Number(parts[0]).toLocaleString();
      return `${intPart}<span style="color:blue">.${parts[1]}</span>`;
    }


    function calculateChange() {
      const a = parseFloat(document.getElementById("a-value").value);
      const b = parseFloat(document.getElementById("b-value").value);
      const result = document.getElementById("result");
  
      if (!isNaN(a) && !isNaN(b) && a !== 0) {
        const change = ((b - a) / a) * 100;
        const sign = change >= 0 ? "+" : "";
        result.innerHTML = `${sign}${formatWithColoredDecimal(change)}%`;
      } else {
        result.textContent = "-";
      }
    }

    function calculatePercentageChange() {
      const a = parseFloat(document.getElementById("a-value2").value);
      const percent = parseFloat(document.getElementById("percent-value").value);
      const result = document.getElementById("result2");
    
      if (!isNaN(a) && !isNaN(percent)) {
        const b = a * (1 + percent / 100);
        result.innerHTML = formatWithColoredDecimal(b);
      } else {
        result.textContent = "-";
      }
    }

    function calculateBMR() {
      // 선택된 라디오 버튼 값 가져오기
      const gender = document.querySelector('input[name="bmr-gender"]:checked').value;
      const age = parseFloat(document.getElementById("bmr-age").value);
      const height = parseFloat(document.getElementById("bmr-height").value);
      const weight = parseFloat(document.getElementById("bmr-weight").value);
      const result = document.getElementById("bmr-result");
    
      if (!isNaN(age) && !isNaN(height) && !isNaN(weight)) {
        let bmr;
        if (gender === "male") {
          bmr = 10 * weight + 6.25 * height - 5 * age + 5;
        } else {
          bmr = 10 * weight + 6.25 * height - 5 * age - 161;
        }
        result.innerHTML = formatWithColoredDecimal(bmr);
      } else {
        result.textContent = "-";
      }
    }


    
    function calculateBMI() {
      const weight = parseFloat(document.getElementById("weight").value);
      const height = parseFloat(document.getElementById("height").value);
      const result = document.getElementById("bmi-result");
  
      if (!isNaN(weight) && !isNaN(height) && height > 0) {
        const heightInMeters = height / 100;
        const bmi = weight / (heightInMeters * heightInMeters);
        result.innerHTML = formatWithColoredDecimal(bmi);
      } else {
        result.textContent = "-";
      }
    }

    function calculateSimpleInterest() {
      const principal = parseFloat(document.getElementById("principal").value);
      const rate = parseFloat(document.getElementById("rate").value);
      const time = parseFloat(document.getElementById("time").value);
    
      const interestResult = document.getElementById("interest-result");
      const totalResult = document.getElementById("total-result");
      const tableWrapper = document.getElementById("simple-table-wrapper");
    
      if (!isNaN(principal) && !isNaN(rate) && !isNaN(time)) {
        const r = rate / 100;
        const years = Math.floor(time);
        let results = [];
    
        for (let i = 1; i <= years; i++) {
          const interest = principal * r * i;
          const total = principal + interest;
          results.push({
            year: `${i}년`,
            interest,
            total
          });
        }
    
        const finalInterest = principal * r * time;
        const finalTotal = principal + finalInterest;
    
        interestResult.innerHTML = formatWithColoredDecimal(finalInterest);
        totalResult.innerHTML = formatWithColoredDecimal(finalTotal);
    
        let html = `
          <table style="width:100%;border-collapse:collapse;margin-top:20px;">
            <thead>
              <tr>
                <th style="border:1px solid #888;text-align:right;padding:8px;background:#f5f5f5;">기간</th>
                <th style="border:1px solid #888;text-align:right;padding:8px;background:#f5f5f5;">누적 이자</th>
                <th style="border:1px solid #888;text-align:right;padding:8px;background:#f5f5f5;">총금액</th>
              </tr>
            </thead>
            <tbody>`;
    
        results.forEach(item => {
          html += `
            <tr>
              <td style="border:1px solid #888;text-align:right;padding:8px;">${item.year}</td>
              <td style="border:1px solid #888;text-align:right;padding:8px;">${formatWithColoredDecimal(item.interest)}</td>
              <td style="border:1px solid #888;text-align:right;padding:8px;">${formatWithColoredDecimal(item.total)}</td>
            </tr>`;
        });
    
        html += `
            </tbody>
          </table>`;
    
        tableWrapper.innerHTML = html;
      } else {
        interestResult.textContent = "-";
        totalResult.textContent = "-";
        tableWrapper.innerHTML = "";
      }
    }



    

    function calculateCompoundInterest() {
      const principal = parseFloat(document.getElementById("c-principal").value);
      const rate = parseFloat(document.getElementById("c-rate").value);
      const time = parseFloat(document.getElementById("c-time").value);
      const periodType = document.querySelector('input[name="c-period-type"]:checked').value;

      const interestResult = document.getElementById("c-interest-result");
      const totalResult = document.getElementById("c-total-result");
      const tableWrapper = document.getElementById("c-table-wrapper");

      if (!isNaN(principal) && !isNaN(rate) && !isNaN(time)) {
        const periods = Math.floor(time);
        const r = rate / 100;
        let results = [];
        let total = principal;

        for (let i = 1; i <= periods; i++) {
          const prevTotal = total;
          total = total * (1 + r);
          const profit = total - prevTotal;                       // 단기 수익
          const cumulativeRate = (total - principal) / principal; // 누적 수익률

          results.push({
            periodLabel: `${i}${periodType === 'day' ? '일' : '개월'}`,
            profit, total, cumulativeRate
          });
        }

        // 결과 표시
        interestResult.innerHTML = formatWithColoredDecimal(total - principal);
        totalResult.innerHTML    = formatWithColoredDecimal(total);

        // 테이블 생성 (모두 인라인 스타일)
        let html = `
          <table style="width:100%;border-collapse:collapse;margin-top:20px;">
            <thead>
              <tr>
                <th style="border:1px solid #888;text-align:right;padding:8px;background:#f5f5f5;">기간</th>
                <th style="border:1px solid #888;text-align:right;padding:8px;background:#f5f5f5;">단기 수익</th>
                <th style="border:1px solid #888;text-align:right;padding:8px;background:#f5f5f5;">총금액</th>
                <th style="border:1px solid #888;text-align:right;padding:8px;background:#f5f5f5;">누적 수익률</th>
              </tr>
            </thead>
            <tbody>`;

        results.forEach(item => {
          html += `
            <tr>
              <td style="border:1px solid #888;text-align:right;padding:8px;">${item.periodLabel}</td>
              <td style="border:1px solid #888;text-align:right;padding:8px;">${formatWithColoredDecimal(item.profit)}</td>
              <td style="border:1px solid #888;text-align:right;padding:8px;">${formatWithColoredDecimal(item.total)}</td>
              <td style="border:1px solid #888;text-align:right;padding:8px;">${(item.cumulativeRate*100).toFixed(2)}%</td>
            </tr>`;
        });

        html += `
            </tbody>
          </table>`;

        tableWrapper.innerHTML = html;
      } else {
        interestResult.textContent = "-";
        totalResult.textContent = "-";
        tableWrapper.innerHTML = "";
      }
    }
   
    
  </script>
</body>
</html>
